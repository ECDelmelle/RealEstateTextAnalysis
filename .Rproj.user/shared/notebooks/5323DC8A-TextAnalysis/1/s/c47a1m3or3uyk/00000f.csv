"0","#Prediction "
"0",""
"0","intercept <- coefs %>%"
"0","  filter(term == ""(Intercept)"") %>%"
"0","  pull(estimate)"
"0",""
"0","classifications <- words %>%"
"0","  inner_join(test_data) %>%"
"0","  inner_join(coefs, by = c(""word"" = ""term"")) %>%"
"0","  group_by(USER_ID) %>%"
"0","  summarize(score = sum(estimate)) %>%"
"0","  mutate(probability = plogis(intercept + score))"
"2","Joining, by = ""USER_ID"""
"0","comment_classes <- classifications %>%"
"0","  left_join(zillow %>%"
"0","              select(cluster1, USER_ID), by = ""USER_ID"") %>% #change here to clusterX "
"0","  mutate(cluster1 = as.factor(cluster1)) #change here to clusterX "
"0",""
"0",""
"0",""
"0","## Confusion matrix"
"0","# at 0.8 threshold"
"0","comment_classes %>%"
"0","  mutate("
"0","    prediction = case_when("
"0","      probability > 0.8 ~ ""1"","
"0","      TRUE ~ ""0"""
"0","    ),"
"0","    prediction = as.factor(prediction)"
"0","  ) %>%"
"0","  conf_mat(cluster1, prediction) #change here to clusterX "
"1","          Truth
"
"1","Prediction"
"1","    0"
"1","    1"
"1","
         0"
"1"," 1245"
"1","  605"
"1","
         1"
"1","   67"
"1","    4"
"1","
"
"0","#accuracy = TN + TP / tot # of predictions"
"0","#precision = TP / TP + FP"
"0","#recall = TP / TP + FN"
